<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello, World! Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --sidebar-width: 260px;
            --bg-color: #121212;
            --sidebar-bg: #1e1e1e;
            --card-bg: #252525;
            --accent-color: #ff4400;
            --text-main: #e0e0e0;
            --text-sub: #a0a0a0;
            --border-color: #333;
        }
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; background-color: var(--bg-color); color: var(--text-main); height: 100vh; display: flex; overflow: hidden; }
        .mobile-header { display: none; align-items: center; justify-content: space-between; padding: 15px 20px; background-color: var(--sidebar-bg); border-bottom: 1px solid var(--border-color); position: fixed; top: 0; left: 0; right: 0; z-index: 100; height: 60px; box-sizing: border-box; }
        .mobile-brand { font-weight: bold; font-size: 18px; color: white; display:flex; align-items:center; gap:10px;}
        .hamburger-btn { font-size: 24px; cursor: pointer; color: var(--text-main); background:none; border:none;}
        .sidebar { width: var(--sidebar-width); background-color: var(--sidebar-bg); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; flex-shrink: 0; z-index: 1000; transition: left 0.3s ease-in-out; overflow-y: auto; }
        .sidebar-close-btn { display: none; position: absolute; top: 15px; right: 15px; font-size: 24px; cursor: pointer; color: #666; }
        .logo-area { font-size: 20px; font-weight: bold; color: white; margin-bottom: 40px; display: flex; align-items: center; gap: 12px; cursor: pointer; }
        .logo-icon { color: var(--accent-color); font-size: 1.2em; }
        .brand-text { font-family: 'Consolas', 'Monaco', 'Courier New', monospace; letter-spacing: -0.5px; }
        .menu-label { font-size: 11px; color: var(--text-sub); text-transform: uppercase; margin-bottom: 8px; margin-top: 15px; font-weight: 600; }
        .nav-item { display: flex; align-items: center; padding: 12px; color: var(--text-main); text-decoration: none; border-radius: 8px; transition: background 0.2s; cursor: pointer; font-size: 14px; }
        .nav-item:hover { background-color: rgba(255, 255, 255, 0.05); color: white; }
        .nav-item i { width: 24px; color: var(--text-sub); }
        .nav-item.active { background-color: rgba(255, 68, 0, 0.1); color: var(--accent-color); }
        .nav-item.active i { color: var(--accent-color); }
        .submenu { margin-left: 10px; padding-left: 10px; border-left: 1px solid #333; margin-top: 5px; margin-bottom: 15px; max-height: 280px; overflow-y: auto; }
        .submenu-item { cursor: pointer; padding: 6px 8px; display:flex; justify-content:space-between; align-items:center; }
        .submenu-item:hover { background: rgba(255,255,255,0.05); border-radius: 4px; }
        .month-folder { margin-bottom: 4px; }
        .month-header:hover { background: rgba(255,255,255,0.08) !important; }
        .shortcut-item { display: flex; align-items: center; padding: 8px 12px; color: var(--text-sub); text-decoration: none; border-radius: 6px; transition: all 0.2s; font-size: 13px; gap: 10px; }
        .shortcut-item:hover { background-color: rgba(255, 255, 255, 0.05); color: white; }
        .shortcut-item i { font-size: 14px; width: 20px; text-align: center; }
        .main-content { flex: 1; position: relative; background-color: var(--bg-color); overflow: hidden; display: flex; flex-direction: column; }
        #dashboard-view { padding: 40px; flex: 1; overflow-y: auto; box-sizing: border-box; }
        #briefing-view { display: none; width: 100%; height: 100%; background-color: #fff; }
        iframe { width: 100%; height: 100%; border: none; display: block; }
        .overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; backdrop-filter: blur(2px); }
        @media (max-width: 768px) { body { flex-direction: column; } .mobile-header { display: flex; } .sidebar { position: fixed; top: 0; left: -100%; height: 100%; width: 280px; box-shadow: 2px 0 10px rgba(0,0,0,0.5); padding-top: 60px; } .sidebar.active { left: 0; } .sidebar-close-btn { display: block; } .logo-area { display: none; } .main-content { margin-top: 60px; } #dashboard-view { padding: 20px; } .dashboard-grid { grid-template-columns: 1fr; } .sports-grid { grid-template-columns: 1fr; } }
        .header { margin-bottom: 30px; }
        .welcome-msg h1 { margin: 0; font-size: 28px; font-weight: 600; }
        .welcome-msg p { margin: 5px 0 0; color: var(--text-sub); font-size: 14px; }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .card { background-color: var(--card-bg); border-radius: 12px; padding: 20px; min-height: 350px; box-sizing: border-box; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .card-title { font-weight: bold; font-size: 14px; color: var(--text-sub); }
        .sport-title-link { text-decoration: none; color: #ccc; font-weight: bold; transition: all 0.2s; }
        .sport-title-link:hover { color: var(--accent-color); text-decoration: underline; }
        .sports-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .sport-card { background-color: var(--card-bg); border-radius: 12px; padding: 15px; }
        .sport-header { display: flex; justify-content: space-between; align-items: center; }
        .loading-text { color: #555; font-style: italic; font-size: 13px; }
        .weather-info { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .temp-big { font-size: 48px; font-weight: bold; }
        .weather-desc { font-size: 14px; color: var(--text-sub); }
        .hourly-forecast { display: flex; justify-content: space-between; margin-top: 10px; }
        .hourly-item { display: flex; flex-direction: column; align-items: center; gap: 6px; flex:1; }
        .world-clock { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #333; margin-bottom: 15px; }
        .clock-item { text-align: center; flex: 1; }
        .clock-city { font-size: 11px; color: #888; margin-bottom: 4px; }
        .clock-time { font-size: 16px; font-weight: bold; color: #fff; font-family: 'Consolas', monospace; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 2000; justify-content: center; align-items: center; }
        .modal-content { background: var(--card-bg); border-radius: 12px; padding: 25px; width: 90%; max-width: 450px; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-title { font-size: 18px; font-weight: bold; color: white; }
        .modal-close { background: none; border: none; color: #888; font-size: 24px; cursor: pointer; }
        .modal-close:hover { color: white; }
        .stock-list-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 6px; margin-bottom: 8px; }
        .stock-list-item span { font-size: 13px; }
        .stock-delete-btn { background: #e74c3c; border: none; color: white; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 11px; }
        .stock-delete-btn:hover { background: #c0392b; }
        .stock-add-form { display: flex; gap: 8px; margin-top: 15px; }
        .stock-add-form input { flex: 1; padding: 10px; border: 1px solid #444; border-radius: 6px; background: #333; color: white; font-size: 13px; }
        .stock-add-form input::placeholder { color: #666; }
        .stock-add-btn { background: var(--accent-color); border: none; color: white; padding: 10px 15px; border-radius: 6px; cursor: pointer; font-size: 13px; }
        .stock-add-btn:hover { background: #e03d00; }
        .stock-hint { font-size: 11px; color: #666; margin-top: 10px; line-height: 1.5; }
        .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }
        .btn-save { background: #27ae60; border: none; color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer; }
        .btn-save:hover { background: #219a52; }
        .btn-cancel { background: #555; border: none; color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer; }
        .btn-cancel:hover { background: #666; }
        .stock-edit-btn { background: none; border: none; color: #666; cursor: pointer; font-size: 14px; padding: 5px; }
        .stock-edit-btn:hover { color: var(--accent-color); }
    </style>
</head>
<body>
    <div class="mobile-header">
        <div class="mobile-brand"><i class="fas fa-fire" style="color:var(--accent-color);"></i> Hello, World!</div>
        <button class="hamburger-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
    </div>
    <div id="sidebar-overlay" class="overlay" onclick="toggleSidebar()"></div>

    <nav class="sidebar" id="mySidebar">
        <span class="sidebar-close-btn" onclick="toggleSidebar()">&times;</span>
        <div class="logo-area" onclick="showHome()">
            <i class="fas fa-fire logo-icon"></i>
            <span class="brand-text">Hello, World!</span>
        </div>
        <div class="menu-label">MENU</div>
        <div id="nav-home" class="nav-item active" onclick="showHome()">
            <i class="fas fa-home"></i><span>í™ˆ (Dashboard)</span>
        </div>
        <div style="margin-top: 20px;">
            <div class="nav-item"><i class="fas fa-newspaper"></i><span>ì™¸ì‹  ë¸Œë¦¬í•‘</span></div>
            <div id="briefing-menu" class="submenu"><span style="color:#555; font-size:12px; padding:10px;">Loading...</span></div>
        </div>
        <div class="menu-label">ë°”ë¡œê°€ê¸°</div>
        <div style="display: flex; flex-direction: column; gap: 2px;">
            <a href="https://hong4137.github.io/briefing/index.html" target="_blank" class="shortcut-item"><i class="fas fa-globe"></i><span>Briefing Site</span></a>
            <a href="https://www.linkedin.com/" target="_blank" class="shortcut-item"><i class="fab fa-linkedin"></i><span>LinkedIn</span></a>
            <a href="https://outlook.office.com/" target="_blank" class="shortcut-item"><i class="fas fa-envelope"></i><span>Outlook</span></a>
            <a href="https://www.google.com/" target="_blank" class="shortcut-item"><i class="fab fa-google"></i><span>Google</span></a>
            <a href="https://www.youtube.com/" target="_blank" class="shortcut-item"><i class="fab fa-youtube"></i><span>YouTube</span></a>
            <a href="https://gemini.google.com/" target="_blank" class="shortcut-item"><i class="fas fa-robot"></i><span>Gemini</span></a>
        </div>
        <div style="margin-top: auto; padding-top: 20px;">
            <a href="https://github.com/hong4137" target="_blank" class="nav-item"><i class="fab fa-github"></i><span>GitHub Profile</span></a>
        </div>
    </nav>

    <main class="main-content">
        <div id="dashboard-view">
            <header class="header">
                <div class="welcome-msg">
                    <h1>ì•ˆë…•í•˜ì„¸ìš”, Hongë‹˜! ğŸ‘‹</h1>
                    <p id="current-date">ì˜¤ëŠ˜ ë‚ ì§œ ë¡œë”©ì¤‘...</p>
                </div>
            </header>
            <div class="dashboard-grid">
                <div class="card" style="display: flex; flex-direction: column;">
                    <div class="world-clock" id="world-clock">
                        <div class="clock-item"><div class="clock-city">ğŸ‡°ğŸ‡· ì„œìš¸</div><div class="clock-time" id="clock-seoul">--:--</div></div>
                        <div class="clock-item"><div class="clock-city">ğŸ‡¦ğŸ‡ª ë‘ë°”ì´</div><div class="clock-time" id="clock-dubai">--:--</div></div>
                        <div class="clock-item"><div class="clock-city">ğŸ‡¬ğŸ‡§ ëŸ°ë˜</div><div class="clock-time" id="clock-london">--:--</div></div>
                        <div class="clock-item"><div class="clock-city">ğŸ‡ºğŸ‡¸ ë‰´ìš•</div><div class="clock-time" id="clock-newyork">--:--</div></div>
                        <div class="clock-item"><div class="clock-city">ğŸ‡ºğŸ‡¸ LA</div><div class="clock-time" id="clock-la">--:--</div></div>
                    </div>
                    <div style="flex: 1;">
                        <div class="card-header"><span class="card-title">â˜ï¸ ì„œìš¸ ë‚ ì”¨</span></div>
                        <div class="weather-info" id="weather-widget"><div class="temp-big">--Â°</div><div class="weather-desc">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div></div>
                        <div id="hourly-forecast-container" class="hourly-forecast"></div>
                        <div style="border-top: 1px solid #333; margin: 15px 0;"></div>
                        <div id="weekly-forecast-container" style="display: flex; justify-content: space-between; text-align: center;"></div>
                    </div>
                </div>
                <div class="card" style="padding: 0; overflow: hidden; position: relative;">
                    <button class="stock-edit-btn" onclick="openStockModal()" style="position: absolute; top: 10px; right: 10px; z-index: 10;"><i class="fas fa-cog"></i></button>
                    <div id="tradingview-container" class="tradingview-widget-container"></div>
                </div>
            </div>
            <div style="margin-bottom: 15px; font-weight:bold; display:flex; justify-content:space-between; align-items:center;">
                <span>ğŸ“Œ My Workspace (Sports)</span>
                <span style="font-size:11px; color:#666;" id="update-time">ì—…ë°ì´íŠ¸: --:--</span>
            </div>
            <div class="sports-grid">
                <div class="sport-card">
                    <div class="sport-header">
                        <div style="display:flex; align-items:center; gap:8px;"><i class="fas fa-futbol" style="color:#a000ff; font-size: 1.2rem;"></i><a href="https://www.premierleague.com" target="_blank" class="sport-title-link">Premier League Picks</a></div>
                        <span id="epl-badge" style="font-size:10px; background:#333; padding:2px 6px; border-radius:4px; color:#aaa;">R20</span>
                    </div>
                    <div id="epl-content" style="margin-top: 10px; display: flex; flex-direction: column; gap: 8px;"><div class="loading-text">Analyzing...</div></div>
                </div>
                <div class="sport-card">
                    <div class="sport-header">
                        <div style="display:flex; align-items:center; gap:8px;"><i class="fas fa-basketball-ball" style="color:#ffae00; font-size: 1.2rem;"></i><a href="https://www.nba.com/warriors" target="_blank" class="sport-title-link">GS Warriors</a></div>
                        <div id="nba-record" style="font-size:14px; font-weight:bold; color:white;">-</div>
                    </div>
                    <div id="nba-content" style="margin-top: 10px; display: flex; flex-direction: column; gap: 8px;"><div class="loading-text">Loading...</div></div>
                </div>
                <div class="sport-card">
                    <div class="sport-header">
                        <div style="display:flex; align-items:center; gap:8px;"><span style="color:#ccff00; font-size: 1.2rem;">ğŸ¾</span><a href="https://www.atptour.com/en/players/carlos-alcaraz/a0e2/overview" target="_blank" class="sport-title-link">Carlos Alcaraz</a></div>
                        <span id="tennis-status" style="font-size:10px; background:#333; padding:2px 6px; border-radius:4px; color:#aaa;">-</span>
                    </div>
                    <div id="tennis-content" style="text-align: center; margin-top: 15px;"><div class="loading-text">Loading...</div></div>
                </div>
                <div class="sport-card">
                    <div class="sport-header">
                        <div style="display:flex; align-items:center; gap:8px;"><i class="fas fa-flag-checkered" style="color:#e10600; font-size: 1.2rem;"></i><a href="https://www.formula1.com" target="_blank" class="sport-title-link">Formula 1</a></div>
                        <span id="f1-badge" style="font-size:10px; background:#333; padding:2px 6px; border-radius:4px; color:#aaa;">Next GP</span>
                    </div>
                    <div id="f1-content" style="text-align: center; margin-top: 10px;"><div class="loading-text">Loading...</div></div>
                </div>
            </div>
        </div>
        <div id="briefing-view"><iframe id="content-frame" src=""></iframe></div>
    </main>

    <div id="stock-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header"><span class="modal-title">ğŸ“ˆ ì£¼ì‹ ì¢…ëª© í¸ì§‘</span><button class="modal-close" onclick="closeStockModal()">&times;</button></div>
            <div style="margin-bottom: 15px;"><div style="font-size: 12px; color: #888; margin-bottom: 10px;">í˜„ì¬ ì¢…ëª© (ìµœëŒ€ 6ê°œ)</div><div id="stock-list"></div></div>
            <div style="border-top: 1px solid #333; padding-top: 15px;">
                <div style="font-size: 12px; color: #888; margin-bottom: 10px;">ì¢…ëª© ì¶”ê°€</div>
                <div class="stock-add-form"><input type="text" id="stock-symbol" placeholder="NASDAQ:AAPL"><input type="text" id="stock-name" placeholder="ì• í”Œ"><button class="stock-add-btn" onclick="addStock()">ì¶”ê°€</button></div>
                <div class="stock-hint">ğŸ’¡ ì‹¬ë³¼ ì˜ˆì‹œ: NASDAQ:AAPL, NYSE:DIS, KRX:005930, FX_IDC:USDKRW</div>
            </div>
            <div class="modal-actions"><button class="btn-cancel" onclick="closeStockModal()">ì·¨ì†Œ</button><button class="btn-save" onclick="saveStocks()">ì €ì¥</button></div>
        </div>
    </div>

    <script>
        const DEFAULT_STOCKS = [{ s: "NASDAQ:NVDA", d: "ì—”ë¹„ë””ì•„" }, { s: "NASDAQ:MU", d: "ë§ˆì´í¬ë¡ " }, { s: "NASDAQ:TSLA", d: "í…ŒìŠ¬ë¼" }, { s: "FX_IDC:USDKRW", d: "ì›ë‹¬ëŸ¬ í™˜ìœ¨" }];
        let currentStocks = JSON.parse(localStorage.getItem('dashboard_stocks')) || DEFAULT_STOCKS;
        let tempStocks = [];

        function toggleSidebar() { const sidebar = document.getElementById('mySidebar'); const overlay = document.getElementById('sidebar-overlay'); sidebar.classList.toggle('active'); overlay.style.display = sidebar.classList.contains('active') ? 'block' : 'none'; }
        function showHome() { document.getElementById('dashboard-view').style.display = 'block'; document.getElementById('briefing-view').style.display = 'none'; document.getElementById('nav-home').classList.add('active'); document.getElementById('content-frame').src = ""; if(window.innerWidth <= 768) toggleSidebar(); }
        function openBriefing(url) { document.getElementById('dashboard-view').style.display = 'none'; document.getElementById('briefing-view').style.display = 'block'; document.getElementById('content-frame').src = url; document.getElementById('nav-home').classList.remove('active'); if(window.innerWidth <= 768) toggleSidebar(); }

        function updateWorldClock() {
            const tz = { 'clock-seoul': 'Asia/Seoul', 'clock-dubai': 'Asia/Dubai', 'clock-london': 'Europe/London', 'clock-newyork': 'America/New_York', 'clock-la': 'America/Los_Angeles' };
            const now = new Date();
            for (const [id, zone] of Object.entries(tz)) { document.getElementById(id).textContent = now.toLocaleTimeString('ko-KR', { timeZone: zone, hour: '2-digit', minute: '2-digit', hour12: false }); }
        }

        function loadTradingViewWidget() {
            const c = document.getElementById('tradingview-container'); c.innerHTML = '<div class="tradingview-widget-container__widget"></div>';
            const s = document.createElement('script'); s.type = 'text/javascript'; s.src = 'https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js'; s.async = true;
            s.innerHTML = JSON.stringify({ "colorTheme": "dark", "dateRange": "12M", "showChart": true, "locale": "kr", "largeChartUrl": "", "isTransparent": true, "showSymbolLogo": true, "width": "100%", "height": "400", "tabs": [{ "title": "ê´€ì‹¬ ì¢…ëª©", "symbols": currentStocks }] });
            c.appendChild(s);
        }

        function openStockModal() { tempStocks = [...currentStocks]; renderStockList(); document.getElementById('stock-modal').style.display = 'flex'; }
        function closeStockModal() { document.getElementById('stock-modal').style.display = 'none'; document.getElementById('stock-symbol').value = ''; document.getElementById('stock-name').value = ''; }
        function renderStockList() { const l = document.getElementById('stock-list'); if (tempStocks.length === 0) { l.innerHTML = '<div style="color:#666; font-size:12px; padding:10px;">ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</div>'; return; } l.innerHTML = tempStocks.map((s, i) => `<div class="stock-list-item"><span>${s.s} - ${s.d}</span><button class="stock-delete-btn" onclick="removeStock(${i})">ì‚­ì œ</button></div>`).join(''); }
        function addStock() { const sym = document.getElementById('stock-symbol').value.trim(); const nm = document.getElementById('stock-name').value.trim(); if (!sym || !nm) { alert('ì‹¬ë³¼ê³¼ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; } if (tempStocks.length >= 6) { alert('ìµœëŒ€ 6ê°œê¹Œì§€ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'); return; } if (tempStocks.some(s => s.s === sym)) { alert('ì´ë¯¸ ì¶”ê°€ëœ ì¢…ëª©ì…ë‹ˆë‹¤.'); return; } tempStocks.push({ s: sym, d: nm }); renderStockList(); document.getElementById('stock-symbol').value = ''; document.getElementById('stock-name').value = ''; }
        function removeStock(i) { tempStocks.splice(i, 1); renderStockList(); }
        function saveStocks() { if (tempStocks.length === 0) { alert('ìµœì†Œ 1ê°œ ì´ìƒì˜ ì¢…ëª©ì´ í•„ìš”í•©ë‹ˆë‹¤.'); return; } currentStocks = [...tempStocks]; localStorage.setItem('dashboard_stocks', JSON.stringify(currentStocks)); closeStockModal(); loadTradingViewWidget(); }

        async function loadBriefingMenu() {
            const mc = document.getElementById('briefing-menu');
            try {
                const r = await fetch('https://hong4137.github.io/briefing/list.json?v=' + Date.now()); if (!r.ok) throw new Error("fail"); const data = await r.json();
                const g = {}; data.forEach(item => { let ym = (item.date && /^\d{4}-\d{2}/.test(item.date)) ? item.date.substring(0, 7) : 'special'; if (!g[ym]) g[ym] = []; g[ym].push(item); });
                const sorted = Object.keys(g).sort((a, b) => { if (a === 'special') return -1; if (b === 'special') return 1; return b.localeCompare(a); });
                let html = '';
                sorted.forEach((ym, mi) => {
                    const items = g[ym]; let dm; if (ym === 'special') { dm = 'íŠ¹ë³„íŒ'; } else { const [y, m] = ym.split('-'); const mn = ['', '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”']; dm = `${y}ë…„ ${mn[parseInt(m)] || m + 'ì›”'}`; }
                    const exp = mi === 0; const icon = ym === 'special' ? 'â­' : 'ğŸ“';
                    html += `<div class="month-folder"><div class="month-header" onclick="toggleMonth(this)" style="display:flex; justify-content:space-between; align-items:center; padding:8px 10px; cursor:pointer; background:rgba(255,255,255,0.03); border-radius:4px; margin-bottom:2px;"><span style="color:#aaa; font-size:12px; font-weight:bold;">${icon} ${dm}</span><span style="color:#666; font-size:10px;">${items.length}ê°œ</span></div><div class="month-items" style="display:${exp ? 'block' : 'none'}; padding-left:8px;">`;
                    items.forEach(item => { let ds = (item.date && /^\d{4}-\d{2}-\d{2}/.test(item.date)) ? item.date.substring(5).replace('-', '.') : (item.date || ''); let ct = item.title.replace('ì™¸ì‹  ë¸Œë¦¬í•‘ | ', '').replace('ì™¸ì‹  ë¸Œë¦¬í•‘ - ', '').replace("Jae's Briefing - ", '').trim(); html += `<div class="submenu-item" onclick="openBriefing('${item.link}')"><span style="color:#ccc; font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:130px;">${ct}</span><span style="color:#666; font-size:10px;">${ds}</span></div>`; });
                    html += `</div></div>`;
                });
                mc.innerHTML = html;
            } catch (e) { mc.innerHTML = '<span style="color:#555; padding:10px; font-size:12px;">ëª©ë¡ ë¡œë”© ì‹¤íŒ¨</span>'; }
        }
        function toggleMonth(h) { const items = h.nextElementSibling; items.style.display = items.style.display === 'none' ? 'block' : 'none'; }

        async function loadSportsData() {
            try {
                const r = await fetch('./sports.json?v=' + Date.now()); if (!r.ok) throw new Error("fail"); const data = await r.json();
                if(data.updated) document.getElementById('update-time').innerText = `Update: ${data.updated}`;
                try { const e = data.epl; if (e) { document.getElementById('epl-badge').innerText = e.display_matchday || (e.matchday ? `R${e.matchday}` : 'EPL'); } const el = e && e.matches ? e.matches : []; const ec = document.getElementById('epl-content'); if (ec) { if (el.length > 0) { let h = ''; el.forEach((m, i) => { const bg = i === 0 ? 'background: rgba(160, 0, 255, 0.1); border-left: 3px solid #a000ff;' : 'background: rgba(255, 255, 255, 0.05); border-left: 3px solid #666;'; h += `<div style="${bg} padding: 8px; border-radius: 6px; margin-bottom: 6px;"><div style="font-size:13px; font-weight:bold; color:white; margin-bottom:6px;">${m.home} vs ${m.away}</div><div style="display:flex; justify-content:space-between; align-items:end;"><div><div style="font-size:12px; font-weight:bold; color:#ddd;">${m.kst_time || '-'}</div><div style="font-size:10px; color:#666; margin-top:1px;">Local: ${m.local || '-'}</div></div><div style="font-size:9px; color:#a000ff; font-weight:bold; background:rgba(0,0,0,0.3); padding:2px 5px; border-radius:4px;">${m.rule_str || 'Match'}</div></div></div>`; }); ec.innerHTML = h; } else { ec.innerHTML = '<div class="loading-text">No Match Data</div>'; } } } catch (e) {}
                try { const n = data.nba; if (n && document.getElementById('nba-content')) { document.getElementById('nba-record').innerText = `${n.record || '-'} | ${n.rank || '-'}`; let h = ''; if (n.last && n.last.opp && n.last.opp !== '-') { const rc = n.last.result === 'W' ? '#ff4400' : '#0088ff'; h += `<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; padding-bottom:8px; border-bottom:1px solid #333;"><span style="font-size:11px; color:#888;">Recent</span><span style="font-size:12px;">vs ${n.last.opp} <span style="color:${rc}; font-weight:bold;">${n.last.result}</span> <span style="color:#666;">(${n.last.score})</span></span></div>`; } if (n.schedule && n.schedule.length > 0) { n.schedule.forEach(g => { const ih = g.location === 'home'; const bg = ih ? 'background: rgba(255, 174, 0, 0.1); border-left: 3px solid #ffae00;' : 'background: rgba(255, 255, 255, 0.05); border-left: 3px solid #666;'; const lp = g.location === 'away' ? '@ ' : 'vs '; h += `<div style="${bg} padding: 8px; border-radius: 6px; margin-bottom: 6px;"><div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;"><span style="font-size:13px; font-weight:bold; color:white;">${lp}${g.opp || 'TBD'}</span><span style="font-size:10px; color:#888;">${g.date || ''}</span></div><div style="display:flex; justify-content:space-between; align-items:end;"><div><div style="font-size:12px; font-weight:bold; color:#ddd;">${g.kst_time || '-'}</div><div style="font-size:10px; color:#666; margin-top:1px;">Local: ${g.local_time || '-'}</div></div></div></div>`; }); } document.getElementById('nba-content').innerHTML = h || '<div class="loading-text">No Data</div>'; } } catch (e) {}
                try { const t = data.tennis; if (t && document.getElementById('tennis-content')) { const rc = t.recent || {}; const nx = t.next || {}; document.getElementById('tennis-status').innerText = nx.status || '-'; const rcol = rc.result === 'W' ? '#4CAF50' : rc.result === 'L' ? '#f44336' : '#888'; const rtxt = rc.result === 'W' ? 'Win' : rc.result === 'L' ? 'Loss' : '-'; document.getElementById('tennis-content').innerHTML = `<div style="display:flex; gap:15px;"><div style="flex:1; padding:8px; background:rgba(255,255,255,0.03); border-radius:6px;"><div style="font-size:10px; color:#666; margin-bottom:6px; text-transform:uppercase;">Recent</div><div style="font-size:11px; color:#aaa; margin-bottom:2px;">${rc.event || '-'}</div><div style="font-size:12px; font-weight:bold; color:white;">vs ${rc.opponent || '-'}</div><div style="display:flex; justify-content:space-between; align-items:center; margin-top:4px;"><span style="font-size:13px; font-weight:bold; color:${rcol};">${rtxt}</span><span style="font-size:10px; color:#888;">${rc.score || '-'}</span></div><div style="font-size:9px; color:#555; margin-top:4px;">${rc.date || '-'}</div></div><div style="flex:1; padding:8px; background:rgba(255,255,255,0.03); border-radius:6px;"><div style="font-size:10px; color:#666; margin-bottom:6px; text-transform:uppercase;">Next</div><div style="font-size:12px; font-weight:bold; color:white; margin-bottom:2px;">${nx.event || '-'}</div><div style="font-size:11px; color:#aaa;">${nx.detail || '-'}</div><div style="font-size:11px; color:#ccff00; margin-top:6px;">${nx.date || '-'}</div></div></div>`; } } catch (e) {}
                try { const f = data.f1; if (f && document.getElementById('f1-content')) { document.getElementById('f1-badge').innerText = f.status || 'Next GP'; document.getElementById('f1-content').innerHTML = `<div style="font-size:13px; font-weight:bold; color:white; margin-bottom:4px;">${f.name || '-'}</div><div style="font-size:14px; color:#e10600; font-weight:bold;">${f.date || '-'}</div><div style="font-size:10px; color:#666; margin-top:4px;">${f.circuit || '-'}</div>`; } } catch (e) {}
            } catch (e) { console.error('Sports Error:', e); }
        }

        function getWeatherIcon(c) { if (c === 0) return 'fa-sun'; if (c >= 1 && c <= 3) return 'fa-cloud-sun'; if (c >= 45 && c <= 48) return 'fa-smog'; if (c >= 51 && c <= 67) return 'fa-cloud-rain'; if (c >= 71 && c <= 77) return 'fa-snowflake'; if (c >= 95 && c <= 99) return 'fa-bolt'; return 'fa-cloud'; }
        async function loadWeather() {
            try {
                const r = await fetch('https://api.open-meteo.com/v1/forecast?latitude=37.5665&longitude=126.9780&current_weather=true'); const d = await r.json();
                document.getElementById('weather-widget').innerHTML = `<div class="temp-big">${Math.round(d.current_weather.temperature)}Â°C</div><div class="weather-desc">ì„œìš¸, ëŒ€í•œë¯¼êµ­<br>í’ì†: ${d.current_weather.windspeed} km/h</div>`;
                const r2 = await fetch('https://api.open-meteo.com/v1/forecast?latitude=37.5665&longitude=126.9780&hourly=temperature_2m,weathercode&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=auto'); const d2 = await r2.json();
                let hh = ''; const ch = new Date().getHours(); for(let i=0; i<6; i++) { const ti = ch + 1 + (i * 3); if(!d2.hourly.time[ti]) break; const t = Math.round(d2.hourly.temperature_2m[ti]); const ic = getWeatherIcon(d2.hourly.weathercode[ti]); const h = new Date(d2.hourly.time[ti]).getHours(); hh += `<div class="hourly-item"><span style="font-size:11px; color:#888;">${h}:00</span><i class="fas ${ic}" style="font-size:16px;"></i><span style="font-weight:bold;">${t}Â°</span></div>`; }
                document.getElementById('hourly-forecast-container').innerHTML = hh;
                let wh = ''; const days = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ']; for(let i=0; i<5; i++) { const dd = new Date(d2.daily.time[i]); const ic = getWeatherIcon(d2.daily.weathercode[i]); const ds = `${dd.getMonth() + 1}.${dd.getDate()}`; const dy = days[dd.getDay()]; wh += `<div style="flex:1;"><div style="font-size:11px; color:#888; margin-bottom:5px;">${ds} <span style="color:#aaa;">(${dy})</span></div><div style="font-size:16px; margin-bottom:5px;"><i class="fas ${ic}"></i></div><div style="font-size:11px; color:#666;">${Math.round(d2.daily.temperature_2m_min[i])}Â° / ${Math.round(d2.daily.temperature_2m_max[i])}Â°</div></div>`; }
                document.getElementById('weekly-forecast-container').innerHTML = wh;
            } catch (e) { console.log("Weather Error", e); }
        }

        document.getElementById('current-date').innerText = new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
        updateWorldClock(); setInterval(updateWorldClock, 60000);
        loadBriefingMenu(); loadSportsData(); loadWeather(); loadTradingViewWidget();
    </script>
</body>
</html>
